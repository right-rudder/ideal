<div x-data="{ currentPage: 1 }" class="max-w-md px-5">
  <%= form_with(model: discover_flight, class: "contents") do |form| %>
    <% if discover_flight.errors.any? %>
      <div id="error_explanation" class="bg-red-50 text-red-500 px-3 py-2 font-medium rounded-lg mt-3">
        <h2><%= pluralize(discover_flight.errors.count, "error") %> prohibited this discover_flight from being saved:</h2>

        <ul>
          <% discover_flight.errors.each do |error| %>
            <li><%= error.full_message %></li>
          <% end %>
        </ul>
      </div>
    <% end %>

    <div x-show="currentPage === 1" class="flex flex-col justify-between">
      <div class="">
        <div class="my-5">
          <%= form.label :first_name %>
          <%= form.text_field :first_name, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>
        </div>

        <div class="my-5">
          <%= form.label :last_name %>
          <%= form.text_field :last_name, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>
        </div>

        <div class="my-5">
          <%= form.label :email %>
          <%= form.text_field :email, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>
        </div>

        <div class="my-5">
          <%= form.label :phone %>
          <%= form.text_field :phone, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>
        </div>

        <div class="my-5" x-data="{ selectedAircraft: '' }">
          <span class="block font-medium text-slate-700 mb-2">Select aircraft type:</span>
          <div class="flex flex-col">
            <label class="inline-flex items-center pb-5">
              <%= form.radio_button :aircraft, 'airplanes', { class: "hidden", "data-x-model" => "selectedAircraft" } %>
              <span class="relative">
                <span class="inline-flex items-center justify-center border border-slate-300 rounded-md cursor-pointer hover:border-slate-400" :class="{ 'bg-slate-200': selectedAircraft == 'airplanes' }">
                  <span class="px-4 py-2 text-sm font-medium text-slate-700">Airplanes</span>
                </span>
                <span class="absolute top-0 bottom-0 left-0 right-0 cursor-pointer" @click="selectedAircraft = 'airplanes'"></span>
              </span>
            </label>

            <label class="inline-flex items-center pb-5" >
              <%= form.radio_button :aircraft, 'helicopters', { class: "hidden", "data-x-model" => "selectedAircraft" } %>
              <span class="relative">
                <span class="inline-flex items-center justify-center border border-slate-300 rounded-md cursor-pointer hover:border-slate-400" :class="{ 'bg-slate-200': selectedAircraft == 'helicopters' }">
                  <span class="px-4 py-2 text-sm font-medium text-slate-700">Helicopters</span>
                </span>
                <span class="absolute top-0 bottom-0 left-0 right-0 cursor-pointer" @click="selectedAircraft = 'helicopters'"></span>
              </span>
            </label>

            <label class="inline-flex items-center pb-5" >
              <%= form.radio_button :aircraft, 'both', { class: "hidden", "data-x-model" => "selectedAircraft" } %>
              <span class="relative">
                <span class="inline-flex items-center justify-center border border-slate-300 rounded-md cursor-pointer hover:border-slate-400" :class="{ 'bg-slate-200': selectedAircraft == 'both' }">
                  <span class="px-4 py-2 text-sm font-medium text-slate-700">Both</span>
                </span>
                <span class="absolute top-0 bottom-0 left-0 right-0 cursor-pointer" @click="selectedAircraft = 'both'"></span>
              </span>
            </label>
          </div>
        </div>

      </div>

      <div class="inline">
        <input type="button" x-on:click="currentPage = 2" class="btn-primary" value="NEXT">
      </div>
    </div>

    <div x-show="currentPage === 2" x-cloak>
      <%= form.label :preferred_date %>
      <%#= form.date_field :preferred_date, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue appearance-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" %>

        <% today = Date.today %>
        <% (0..9).each do |i| %>
          <% date = today + i.days %>
          <input type="button" name="date" value="<%= date.strftime('%Y-%m-%d') %>" class="btn-secondary py-2 px-3 text-sm rounded-full mx-1 my-1 hover:bg-blue-500 hover:text-white">
        <% end %>

      <div class="my-5">
        <%= form.label :preferred_availability %>
        <%= form.text_field :preferred_availability, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>
      </div>

      <div class="flex justify-between">
        <input type="button" class="btn-primary" @click="currentPage--" :disabled="currentPage === 1" value="PREVIOUS">
        <input type="button" class="btn-primary" @click="currentPage++" value="NEXT">
      </div>
    </div>

    <div x-show="currentPage === 3" x-cloak>
      <%= form.label :alternate_date %>
      <%= form.date_field :alternate_date, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>

      <div class="my-5">
        <%= form.label :alternate_availability %>
        <%= form.text_field :alternate_availability, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>
      </div>

      <div class="my-5">
        <%= form.label :comments %>
        <%= form.text_area :comments, rows: 4, class: "block shadow rounded-md border border-slate-200 outline-none px-3 py-2 mt-2 w-full focus:border-ideal-blue focus:ring-ideal-blue" %>
      </div>

      <div class="flex justify-between">
        <input type="button" class="btn-primary" value="PREVIOUS" @click="currentPage--">
        <div class="inline">
          <%= form.submit "HELLO", class: "btn-primary" %>
        </div>
      </div>
    </div>
  <% end %>
</div>